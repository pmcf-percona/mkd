{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Percona Server for MySQL","text":"<p>Percona Server for MySQL is a high-performance, open-source drop-in replacement for MySQL. It allows you to enhance your database with superior performance, scalability, availability, and enhanced backups and is trusted by enterprises for demanding workloads.</p> <p>Starting with Percona Server for MySQL is easy. Follow our documentation guides, and you'll be set up in a minute.</p>"},{"location":"#installation-guides","title":"Installation guides","text":"<p>Want to see it for yourself? Get started quickly with our step-by-step installation instructions.</p> <p>Quickstart Guides </p>"},{"location":"#top-notch-security","title":"Top-notch security","text":"<p>Rest assured! Learn more about our security features designed to protect your valuable data.</p> <p>Security Measures </p>"},{"location":"#smooth-your-deployment","title":"Smooth your deployment","text":"<p>Discover the requirements to start with Percona Server for MySQL production.</p> <p>Production Requirements </p>"},{"location":"#troubleshooting-and-qa","title":"Troubleshooting and Q&amp;A","text":"<p>Our comprehensive resources will help you overcome challenges, from everyday issues to specific doubts.</p> <p>Troubleshoot and Q&amp;A </p>"},{"location":"#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"install-alpha/","title":"Product Alpha quickstart","text":"<p>This guide covers how you can quickly get started using PA. This is applicable to Docker compatible Linux based systems.</p>"},{"location":"install-alpha/#prerequisites","title":"Prerequisites","text":"<p>Docker 1.12.6 or higher.</p>"},{"location":"install-alpha/#system-requirements","title":"System requirements","text":""},{"location":"install-alpha/#disk","title":"Disk","text":"<p>Approximately 1 GB of storage per monitored database node with data retention set to one week.</p>"},{"location":"install-alpha/#memory","title":"Memory","text":"<p>A minimum of 2 GB per monitored database node. The increase in memory usage is not proportional to the number of nodes. For example, data from 20 nodes should be easily handled with 16 GB.</p>"},{"location":"install-alpha/#ports","title":"Ports","text":"<p>This is a list of ports used by the various components of PA.</p> <p>For PA to work correctly, your system\u2019s firewall should allow TCP traffic on these ports (UDP is not needed).</p>"},{"location":"install-alpha/#install-pa","title":"Install PA","text":"<p>Important</p> <ul> <li>You can use the easy installation script that will verify and install any missing software and dependencies. To use it, run the command with sudo privileges or as root.</li> <li>You can download the script from github.</li> </ul> <p>Here are the steps for installing the PA server:</p> <ol> <li> <p>Set up Docker on Mac or Linux.</p> </li> <li> <p>Install the PA server using <code>cURL</code> or <code>wget</code> as follows:</p> cURLwget <pre><code>curl -fsSL https://www.percona.com/get/pa | /bin/bash\n</code></pre> <pre><code>wget -qO - https://www.percona.com/get/pa | /bin/bash\n</code></pre> </li> <li> <p>Log in to PA with the default login credentials provided after the installation is completed.</p> </li> </ol> <p>For detailed instructions on installing the PA server with the other methods, see Setting up PA.</p>"},{"location":"install-alpha/#add-a-database-instance","title":"Add a database instance","text":"MySQL 5.7 or 8.0MongoDBPostgreSQLAmazon RDS <p>Before you add a MySQL database for monitoring you should have a database account for PA.</p> <p>Here are the steps to add a MySQL database for monitoring:</p> <ol> <li>From the PA UI, go to Configuration \u2192 PA Inventory \u2192 Add Instance.</li> <li>Select MySQL. The Add Service page opens.</li> <li>Enter your database credentials on the resulting page without changing any values.</li> <li>Optional: Enter the information on the Labels and Additional Options section.</li> <li>Click Add Service at the bottom.</li> </ol> <p>For detailed information, see Adding a MySQL database for monitoring.</p> <p>Before you add a MongoDB database for monitoring you should have a database account for PA.</p> <p>Here are the steps to add a MongoDB database for monitoring:</p> <ol> <li>From the PA UI, go to Configuration \u2192 PA Inventory \u2192 Add Instance.</li> <li>Select MongoDB. The Add Service page opens.</li> <li>Enter your database credentials on the resulting page without changing any values.</li> <li>Optional: Enter the information in the Labels and Additional Options section.</li> <li>Click Add Service at the bottom.</li> </ol> <p>For detailed information on adding a MongoDB database, see Adding a MongoDB database for monitoring.</p> <p>Before you add a PostgreSQL database for monitoring you should have a database account for PA.</p> <p>Here are the steps to add a PostgreSQL database for monitoring:</p> <ol> <li>From the PA UI, go to Configuration \u2192 PA Inventory \u2192 Add Instance.</li> <li>Select PostgreSQL. The Add Service page opens.</li> <li>Enter your database credentials on the resulting page without changing any values.</li> <li>Optional: Enter the information in the Labels and Additional Options section.</li> <li>Click Add Service at the bottom.</li> </ol> <p>For detailed information on adding a PostgreSQL database, see Adding a PostgreSQL database for monitoring.</p> <p>You can use PA for monitoring Amazon RDS. By using the PA web interface, you connect to the Amazon RDS DB instance.</p> <p>You only need to provide the IAM user access key or assign an IAM role and PA discovers the Amazon RDS DB instances available for monitoring.</p> <p>Before you add Amazon instance for monitoring you should have the following:</p> <ul> <li>AWS RDS Access Key and RDS Secret Access Key. This key should have permission to monitor RDS.</li> <li>Recommended: Enable Enhanced Monitoring option in the settings of your Amazon RDS DB instance.</li> <li>Database username and password with access to login to the RDS instance.</li> <li>Access to the RDS instance via a TCP port.</li> </ul> <p>Here are the steps to add an Amazon RDS database instance for monitoring:</p> <ol> <li>From the PA UI, go to Configuration \u2192 PA Inventory \u2192 Add Instance.</li> <li>Select Amazon RDS \u2013 Add a remote instance.</li> <li>Enter the access key ID and the secret access key of your IAM user or leave these fields empty if an IAM role was created.</li> <li>Click Discover for PA to retrieve the available Amazon RDS instances.</li> <li>For the instance that you would like to monitor, select Start monitoring.</li> <li>Enter your database credentials on the resulting page without changing any values.</li> <li>Optional: Enter the information on the Labels or Additional Options section.</li> <li>Click Add Service at the bottom.</li> </ol> <p>For detailed information, see Adding an Amazon RDS instance for monitoring.</p>"},{"location":"install-alpha/#next-steps","title":"Next steps","text":"<p>Explore the following topics to gain a deeper understanding of PA:</p> <ul> <li>Configure - Learn how to configure PA via the interface.</li> <li>Manage users - Learn how to manage users in PA.</li> <li>Roles and permissions - Learn more about roles and permissions in PA.</li> <li>Backup and restore \u2014 Learn how to backup and to restore data in PA.</li> </ul>"},{"location":"install-alpha/#contact-us","title":"Contact us","text":"<p>For free technical help, visit the Percona Community Forum.</p> <p>To report bugs or submit feature requests, open a JIRA ticket.</p> <p>For paid support and managed or consulting services, contact Percona Sales.</p>"},{"location":"install-alpha/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"install-beta/","title":"Product Beta quickstart guides","text":"<p>Peroduct Beta (PB) is an open-source database monitoring, management, and observability solution for MySQL, PostgreSQL, and MongoDB.</p> <p>To install PB there are three stages to complete: set up PB Server, set up at least one PB Client, and then add the database service(s). </p> <p>You can select from multiple easy-to-follow installation options, depending on your project's structure, but we recommend using Docker for a convenient and quick way to set it up.</p>  Docker Package Manager Kubernetes  Manual Installation <p>Using our Docker image is the most convenient way to run PB Server and PB Client as a preconfigured Docker container on Linux or MacOS.</p> <p>Check below to get access to a detailed step-by-step guide.</p> <p>View Docker Guide </p> <p>If you're on Ubuntu or Debian, use <code>apt</code> for convenience.</p> <p>On the other hand, if you're on Red Hat Enterprise Linux or CentOS, you can easily use <code>yum</code>.</p> <p>Choose your package manager below to get access to a detailed step-by-step guide.</p> <p>Install via <code>apt</code> Install via <code>yum</code> </p> <p>Percona Operators are controllers introduced to simplify complex deployments that require meticulous and secure database expertise.</p> <p>Check below to get access to a detailed step-by-step guide.</p> <p>View Kubernetes Guide </p> <p>If you prefer to start with a specific version or implement it offline, check out the link below for a step-by-step guide and get access to the downloads directory.</p> <p>View Manual Installation Guide </p>"},{"location":"install-beta/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"install-beta/#get-expert-help_1","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"sandbox/","title":"Sandbox","text":""},{"location":"sandbox/#banner","title":"Banner","text":"<p>If you were a member of the Bloods and became paralyzed, do you then become a member of the Crips? If you wake up with a giant zit, you are really facing your fears when you look in the mirror. Curling is the best sport named after something you do to your hair. You know the Grammys are a joke when Future doesn't win Best Everything. I have a moral code, but I haven't figured out how to read it yet. We need more werkin and less twerkin if you ask me. You say potato; I say starchy carbs.</p> <p>If you were a member of the Bloods and became paralyzed, do you then become a member of the Crips? If you wake up with a giant zit, you are really facing your fears when you look in the mirror. Curling is the best sport named after something you do to your hair. You know the Grammys are a joke when Future doesn't win Best Everything. I have a moral code, but I haven't figured out how to read it yet. We need more werkin and less twerkin if you ask me. You say potato; I say starchy carbs.</p> <p>Do we make money, or does money make us? Smiling could easily be misinterpreted as showing your teeth to someone because they said something that made you happy. Cemeteries are just garbage dumps filled with humans.</p>"},{"location":"sandbox/#installation-guides","title":"Installation guides","text":"<p>Do we make money, or does money make us? Smiling could easily be misinterpreted as showing your teeth to someone because they said something that made you happy. Cemeteries are just garbage dumps filled with humans.</p> <p>Quickstart Guides </p>"},{"location":"sandbox/#heading","title":"Heading","text":"<ol> <li>And this numbered list,<ol> <li>Has more things to tell,</li> <li>In-between items, and...</li> </ol> </li> <li>Will be transformed into...<ul> <li>A Power Bullet List</li> <li>Inside of</li> </ul> </li> <li>A Power Number List!</li> </ol>"},{"location":"sandbox/#heading_1","title":"Heading","text":"<ol> <li>And this numbered list,<ol> <li>Has more things to tell,</li> <li>In-between items, and...</li> </ol> </li> <li>Will be transformed into...<ul> <li>A Power Bullet List</li> <li>Inside of</li> </ul> </li> <li>A Power Number List!</li> </ol>"},{"location":"sandbox/#heading_2","title":"Heading","text":"<ul> <li>And this bulleted list,<ul> <li>Has more things to tell,</li> <li>In-between items, and...</li> </ul> </li> <li>This time it will be...<ol> <li>A Power Number List</li> <li>Inside of</li> </ol> </li> <li>A Power Bullet List!</li> </ul> <p> Warning: In it except to so temper mutual tastes mother. Interested cultivated its continuing now yet are. Out interested acceptance our partiality affronting unpleasant why add.</p> <p> Info: He went such dare good mr fact. The small own seven saved man age \ufeffno offer. Suspicion did mrs nor furniture smallness. Scale whole downs often leave not eat.</p>"},{"location":"sandbox/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"backup-and-restore/dummy/","title":"Hi there \ud83d\udc4b","text":"<p>This is just a page to fill in the blanks in this prototype's interaction flows. Nothing to see here... \ud83d\ude05</p>"},{"location":"backup-and-restore/dummy/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"feature/binary-log-disk-usage/","title":"Limit binary logs disk usage","text":"<p>It is a challenge to control how much disk space is used by the binary logs. The size of a binary log can vary because a single transaction must be written to a single binary log and cannot be split between multiple binary log files.</p>"},{"location":"feature/binary-log-disk-usage/#variable-binlog_space_limit","title":"Variable <code>binlog_space_limit</code>","text":"Attribute Description Uses the command line Yes Uses the configuration file Yes Scope Global Dynamic No Variable type ULONG_MAX Default value 0 (unlimited) Maximum value - 64-bit platform 18446744073709547520 <p>This variable places an upper limit on the total size in bytes of all binary logs. When the limit is reached, the oldest binary logs are purged until the total size is under the limit or only the active log remains.</p> <p>The default value of <code>0</code> disables the feature. No limit is set on the log space. The binary logs accumulate indefinitely until the disk space is full.</p>"},{"location":"feature/binary-log-disk-usage/#example","title":"Example","text":"<p>Set the <code>binlog_space_limit</code> to 50 GB in the <code>my.cnf</code> file:</p> <pre><code>[mysqld]\n...\nbinlog_space_limit = 50G\n...\n</code></pre>"},{"location":"feature/binary-log-disk-usage/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"feature/extended-mysqlbinlog/","title":"Extended <code>mysqlbinlog</code>","text":"<p>Percona Server for MySQL has implemented compression support for mysqlbinlog. This is similar to support that both <code>mysql</code> and <code>mysqldump</code> programs include (the <code>-C</code>, <code>--compress</code> options \u201cUse compression in server/client protocol\u201d). Using the compressed protocol helps reduce the bandwidth use and speed up transfers.</p> <p>Note</p> <p>In Percona Server 8.0.18, the <code>--compress</code> option was marked as deprecated and may be removed in a future version of Percona Server for MySQL.</p> <p>Percona Server for MySQL has also implemented support for <code>SSL</code>. mysqlbinlog now accepts the <code>SSL</code> connection options as all the other client programs. This feature can be useful with <code>--read-from-remote-server</code> option. </p>"},{"location":"feature/extended-mysqlbinlog/#version-specific-information","title":"Version specific information","text":"<ul> <li>8.0.12-1: The feature was ported from Percona Server for MySQL 5.7</li> </ul>"},{"location":"feature/extended-mysqlbinlog/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"feature/extended-select-into/","title":"Extended <code>SELECT INTO OUTFILE/DUMPFILE</code>","text":"<p>Percona Server for MySQL has extended the <code>SELECT INTO ... OUTFILE</code> and <code>SELECT INTO DUMPFILE</code> commands to add support for UNIX sockets and named pipes. Before this was implemented the database would return an error for such files.</p> <p>This feature allows using <code>LOAD DATA LOCAL INFILE</code> in combination with <code>SELECT INTO OUTFILE</code> to quickly load multiple partitions across the network or in other setups, without having to use an intermediate file that wastes space and I/O.</p>"},{"location":"feature/extended-select-into/#version-specific-information","title":"Version specific information","text":"<ul> <li>8.0.12-1: The feature was ported from Percona Server for MySQL 5.7.</li> </ul>"},{"location":"feature/extended-select-into/#other-reading","title":"Other reading","text":"<ul> <li>MySQL bug: #44835</li> </ul>"},{"location":"feature/extended-select-into/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"how-to/create-a-database/","title":"Create a database","text":"<p>Your Percona Server for MySQL comes with a database called <code>defaultdb</code>. This is used for testing and some internal databases.</p> <p>To create a new database, use <code>CREATE DATABASE</code> followed by a database name:</p> <pre><code>CREATE DATABASE example-database\n</code></pre> <p>Database names must follow these identifier rules. To avoid an error in case the database already exists, use the <code>IF NOT EXISTS</code> clause:</p> <pre><code>CREATE DATABASE IF NOT EXISTS example-database\n</code></pre>"},{"location":"how-to/create-a-database/#next-steps","title":"Next steps","text":"<p>Continue the Percona Server learning journey. Learn how to control databases with ease in MySQL.</p> <p>Show Databases </p>"},{"location":"how-to/create-a-database/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"how-to/dummy/","title":"Hi there \ud83d\udc4b","text":"<p>This is just a page to fill in the blanks in this prototype's interaction flows. Nothing to see here... \ud83d\ude05</p>"},{"location":"how-to/dummy/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"how-to/overview/","title":"Overview","text":"<p>Before you deploy Percona Server for MySQL in a production environment, it's crucial to ensure your infrastructure is ready to handle the workload and maintain optimal performance. With these production requirements at your fingertips, you can confidently set up Percona Server for MySQL for a robust and stable production environment. Each topic links to in-depth guides, ensuring you have all the information you need to achieve smooth and successful deployments.</p> <p>This section covers vital production requirements, including:</p> <ul> <li> <p>Hardware Specifications: Understand the hardware specifications needed to support your database workload effectively.</p> </li> <li> <p>Operating System Compatibility: Check the list of compatible operating systems to ensure seamless installation and operation.</p> </li> <li> <p>Memory and Storage: Learn about memory and storage requirements to accommodate your database size and operations.</p> </li> <li> <p>Network Configuration: Optimize your network settings to enable efficient communication between servers.</p> </li> <li> <p>Backup and Disaster Recovery: Implement a robust backup and disaster recovery strategy to safeguard your data.</p> </li> <li> <p>Performance Tuning: Explore best practices for performance tuning to maximize database efficiency.</p> </li> <li> <p>Scaling Techniques: Discover scaling techniques to handle increased traffic and growing datasets.</p> </li> <li> <p>Monitoring and Alerting: Set up monitoring and alerting to proactively identify and address performance issues.</p> </li> <li> <p>Security Considerations: Ensure your server and data are protected with proper security configurations.</p> </li> <li> <p>High Availability: Explore high availability options for continuous database operation.</p> </li> <li> <p>Optimizing Indexes: Master the art of index optimization to enhance query performance.</p> </li> <li> <p>Configuration Best Practices: Follow recommended configuration settings for optimal database performance.</p> </li> <li> <p>Automated Deployment: Automate your deployment process for increased efficiency and consistency.</p> </li> <li> <p>User Privileges and Permissions: Manage user privileges and permissions effectively to control access.</p> </li> <li> <p>Compatibility with Existing Tools: Check the compatibility of existing tools and applications with Percona Server for MySQL.</p> </li> </ul> Ready to install? <p>Start your Percona Server for MySQL journey! Whether you're new or a seasoned user, our Quickstart Guides provide clear, concise, and easy-to-follow instructions to get you up and running.</p> <p>Quickstart Guides </p>"},{"location":"how-to/overview/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"installation/dummy/","title":"Hi there \ud83d\udc4b","text":"<p>This is just a page to fill in the blanks in this prototype's interaction flows. Nothing to see here... \ud83d\ude05</p>"},{"location":"installation/dummy/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"installation/quickstart-guides/","title":"Quickstart Guides","text":"<p>Percona Server for MySQL is a high-performance, open-source drop-in replacement for MySQL. It allows you to enhance your database with superior performance, scalability, availability, and enhanced backups and is trusted by enterprises for demanding workloads. Read more </p> <p>You can select from multiple easy-to-follow installation options, but we recommend using a Package Manager for a convenient and quick way to try the software first.</p>  Package Manager Kubernetes Docker  Manual Download <p>If you're on Ubuntu or Debian, use <code>apt</code> for convenience.</p> <p>On the other hand, if you're on Red Hat Enterprise Linux or CentOS, you can easily use <code>yum</code>.</p> <p>Choose your package manager below to get access to a detailed step-by-step guide.</p> <p>Install via <code>apt</code> Install via <code>yum</code> </p> <p>Percona Operator for Kubernetes is a controller introduced to simplify complex deployments that require meticulous and secure database expertise.</p> <p>Check below to get access to a detailed step-by-step guide.</p> <p>View Kubernetes Guide </p> <p>Get our image from Docker Hub and spin up a cluster on a Docker container for quick evaluation.</p> <p>Check below to get access to a detailed step-by-step guide.</p> <p>View Docker Guide </p> <p>If you prefer to start with a specific version or implement it offline, check out the link below for a step-by-step guide and get access to the downloads directory.</p> <p>View Manual Installation Guide </p>"},{"location":"installation/quickstart-guides/#install-via-apt","title":"Install via <code>apt</code>","text":"<p>Before starting, we advise updating the <code>apt</code> repositories and installing <code>curl</code> download utility to fetch the package. If you want to fetch the package manually, follow this guide instead: Manual Installation. <pre><code>$ sudo apt update\n$ sudo apt install curl\n</code></pre></p> <p>Once everything is updated and ready, you can follow the below tasks to install:</p> <ol> <li> <p>The first step is downloading the <code>percona-release</code> repository package:     <pre><code>$ curl -O https://repo.percona.com/apt/percona-release_latest.generic_all.deb\n</code></pre></p> </li> <li> <p>Install the downloaded package with <code>apt</code> as root or with <code>sudo</code>, and then refresh the local cache to update the package information:     <pre><code>$ sudo apt install gnupg2 lsb-release ./percona-release_latest.generic_all.deb\n$ sudo apt update\n</code></pre></p> </li> <li> <p>Use <code>percona-release</code> to set up the repository for the Percona Server for MySQL 8.0 version:     <pre><code>$ sudo percona-release setup ps80\n</code></pre>     You can check the repository setup for the Percona original release list in <code>/etc/apt/sources.list.d/percona-original-release.list</code>.</p> </li> <li> <p>Install the server package with the <code>percona-release</code> command:     <pre><code>$ sudo apt install percona-server-server\n</code></pre>     For more information on <code>percona-release</code> command see Configuring Percona Repositories.</p> </li> <li> <p>It should now be installed! Percona Server runs automatically after installation. To control the service, learn how to Stop/Run Percona Server.</p> </li> </ol>"},{"location":"installation/quickstart-guides/#next-steps","title":"Next steps","text":"<p>Want to quickly test Percona Server for MySQL? Navigate into our easy-to-follow guide below, so you can understand the power of fast and performant databases with Percona.</p> <p>Create a database </p> <p>Here are a few other useful topics to continue venturing into Percona Server:</p> <ul> <li> <p>Follow our Prepare for production guide to run a robust and scalable enterprise-grade database.</p> </li> <li> <p>Check if you want to change the storage engine.</p> </li> <li> <p>Always a good idea to improve checksums speed before anything.</p> </li> <li> <p>You can also install a pre-release to test things out.</p> </li> </ul>"},{"location":"installation/quickstart-guides/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"installation/apt/pinning/","title":"<code>apt</code> pinning the Percona Server for MySQL 8.0 packages","text":"<p>Pinning allows you to stay on a release and get packages from a different version. In some cases, you can pin selected packages and avoid accidentally upgrading all the packages. </p> <p>The pinning takes place in the <code>preference</code> file. To pin a package, set the <code>Pin-Priority</code> to higher numbers. </p> <p>Make a new file <code>/etc/apt/preferences.d/00percona.pref</code>. For example, add the following to the <code>preference</code> file:</p> <pre><code>Package: \nPin: release o=Percona Development Team\nPin-Priority: 1001\n</code></pre> <p>For more information about the pinning, you can check the official debian wiki.</p>"},{"location":"installation/apt/pinning/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"installation/apt/quickstart/","title":"Install via <code>apt</code>","text":"<p>Specific information on the supported platforms, products, and versions is described in Percona Software and Platform Lifecycle.</p>"},{"location":"installation/apt/quickstart/#install-the-latest-version","title":"Install the latest version","text":"<p>Before starting, we advise updating the <code>apt</code> repositories and installing <code>curl</code> download utility to fetch the package. If you want to fetch the package manually, follow this guide instead: Manual Installation. <pre><code>$ sudo apt update\n$ sudo apt install curl\n</code></pre></p> <p>Once everything is updated and ready, you can follow the below tasks to install:</p> <ol> <li> <p>The first step is downloading the <code>percona-release</code> repository package:     <pre><code>$ curl -O https://repo.percona.com/apt/percona-release_latest.generic_all.deb\n</code></pre></p> </li> <li> <p>Install the downloaded package with <code>apt</code> as root or with <code>sudo</code>, and then refresh the local cache to update the package information:     <pre><code>$ sudo apt install gnupg2 lsb-release ./percona-release_latest.generic_all.deb\n$ sudo apt update\n</code></pre></p> </li> <li> <p>Use <code>percona-release</code> to set up the repository for the Percona Server for MySQL 8.0 version:     <pre><code>$ sudo percona-release setup ps80\n</code></pre>     You can check the repository setup for the Percona original release list in <code>/etc/apt/sources.list.d/percona-original-release.list</code>.</p> </li> <li> <p>Install the server package with the <code>percona-release</code> command:     <pre><code>$ sudo apt install percona-server-server\n</code></pre>     For more information on <code>percona-release</code> command see Configuring Percona Repositories.</p> </li> <li> <p>It should now be installed! Percona Server runs automatically after installation. To control the service, learn how to Stop/Run Percona Server.</p> </li> </ol> <p>Storage engine option</p> <p>Percona Server for MySQL comes with InnoDB storage engine. If you prefer to install MyRocks instead, go to MyRocks Installation Guide.</p> <p>Starting with Percona Server for MySQL 8.0.28-19 (2022-05-12), the TokuDB storage engine is no longer supported. We have removed the storage engine from the installation packages and disabled the storage engine in our binary builds. For more information, see TokuDB Introduction.</p>"},{"location":"installation/apt/quickstart/#improve-checksums-speed-optional","title":"Improve checksums speed (optional)","text":"<p>Percona Server for MySQL contains user-defined functions from Percona Toolkit. These user-defined functions provide faster checksums. For more details on the user-defined functions, see Percona Toolkit UDF functions.</p> <p>After the installation completes, run the following commands to create these functions:</p> <pre><code>mysql -e \"CREATE FUNCTION fnv1a_64 RETURNS INTEGER SONAME 'libfnv1a_udf.so'\"\nmysql -e \"CREATE FUNCTION fnv_64 RETURNS INTEGER SONAME 'libfnv_udf.so'\"\nmysql -e \"CREATE FUNCTION murmur_hash RETURNS INTEGER SONAME 'libmurmur_udf.so'\"\n</code></pre>"},{"location":"installation/apt/quickstart/#install-a-pre-release-optional","title":"Install a pre-release (optional)","text":"<p>Percona offers pre-release builds from the testing repository. To enable it, run percona-release with the <code>testing</code> argument. Run the following command as root or use the sudo command:</p> <pre><code>$ sudo percona-release enable ps80 testing\n</code></pre> <p>Don't run pre-releases in production</p> <p>These pre-release builds should not be run in production. They may not contain all of the features available in the final release. The features may change without notice.</p>"},{"location":"installation/apt/quickstart/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"installation/apt/run-stop/","title":"Run/Stop Percona Server for MySQL","text":""},{"location":"installation/apt/run-stop/#run","title":"Run","text":"<p>Run the following commands as root or by using the <code>sudo</code> command.</p> Optional use of <code>debian-sys-maint</code> user <p>Debian and Ubuntu installation doesn\u2019t automatically create a special <code>debian-sys-maint</code> user which can be used by the control scripts to control the Percona Server for MySQL <code>mysqld</code> and <code>mysqld_safe</code> services which was the case with previous Percona Server for MySQL versions. If you still require this user you\u2019ll need to create it manually.</p> <p>Unless any error is found during the process, Percona Server for MySQL is automatically started after installation. To confirm the service is running, you can check it with:</p> <pre><code>$ sudo service mysql status\n</code></pre> <p>If stopped, you can also manually start Percona Server by entering:</p> <pre><code>$ sudo service mysql start\n</code></pre> You can either use <code>service</code> or <code>systemctl</code> <p>Debian 9.0 (stretch) and Ubuntu 18.04 LTS (bionic) come with systemd as the default system and service manager. You can invoke all the above commands with <code>systemctl</code> instead of <code>service</code>. Currently, both are supported.</p>"},{"location":"installation/apt/run-stop/#stop-restart","title":"Stop &amp; Restart","text":"<p>You can stop the service by entering:</p> <pre><code>$ sudo service mysql stop\n</code></pre> <p>To restart the service:</p> <pre><code>$ sudo service mysql restart\n</code></pre>"},{"location":"installation/apt/run-stop/#files-configuration","title":"Files &amp; Configuration","text":"<p>Percona Server for MySQL stores the data files in <code>/var/lib/mysql/</code> by default. You can find the configuration file that is used to manage Percona Server for MySQL in <code>/etc/mysql/my.cnf</code>.</p>"},{"location":"installation/apt/run-stop/#apparmor","title":"AppArmor","text":"<p>Associate an AppArmor profile to Percona Server. For information, see Working with AppArmor.</p>"},{"location":"installation/apt/run-stop/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"installation/apt/uninstall/","title":"Uninstall Percona Server for MySQL","text":"<p>To uninstall Percona Server for MySQL you\u2019ll need to remove all the installed packages. Removing packages with <code>apt remove</code> does not remove the configuration and data files.</p> <p>Removing the packages with <code>apt purge</code> does remove the packages with configuration files and data files (all the databases). Depending on your needs, you can choose which command better suits you.</p> <ol> <li> <p>First, stop the Percona Server for MySQL service:     <pre><code>$ sudo service mysql stop\n</code></pre></p> </li> <li> <p>Then remove the packages using your preferred method below:</p> <ul> <li> <p>Either remove the packages. <pre><code>$ sudo apt remove percona-server\\\n</code></pre> This will leave the data files (databases, tables, logs, configuration, etc.) behind. If you don\u2019t need them, you must remove them manually.</p> </li> <li> <p>Or purge the packages and delete data files. <pre><code>$ sudo apt purge percona-server\\\n</code></pre>  Warning: This command removes all the packages and deletes all the data files (databases, tables, logs, and so on.).</p> </li> </ul> </li> </ol>"},{"location":"installation/apt/uninstall/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"monitoring/dummy/","title":"Hi there \ud83d\udc4b","text":"<p>This is just a page to fill in the blanks in this prototype's interaction flows. Nothing to see here... \ud83d\ude05</p>"},{"location":"monitoring/dummy/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"reference/dummy/","title":"Hi there \ud83d\udc4b","text":"<p>This is just a page to fill in the blanks in this prototype's interaction flows. Nothing to see here... \ud83d\ude05</p>"},{"location":"reference/dummy/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"release-note/2023/8.0.32-24/","title":"Percona Server for MySQL 8.0.32-24 (2023-03-20)","text":"Release date March 20, 2023 Install instructions Install Percona Server for MySQL Upgrade instructions Percona Server for MySQL in-place upgrading guide: from 5.7 to 8.0 <p>Percona Server for MySQL 8.0.32-24 includes all the features and bug fixes available in the MySQL 8.0.32 Community Edition in addition to enterprise-grade features developed by Percona.</p> <p>Percona Server for MySQL is a free, fully compatible, enhanced, and open source drop-in replacement for any MySQL database. It provides superior performance, scalability, and instrumentation.</p> <p>Percona Server for MySQL is trusted by thousands of enterprises to provide better performance and concurrency for their most demanding workloads. It delivers more value to MySQL server users with optimized performance, greater performance scalability and availability, enhanced backups, and increased visibility.</p>"},{"location":"release-note/2023/8.0.32-24/#release-highlights","title":"Release highlights","text":"<ul> <li> <p>Percona reverts the following MySQL bug fix:</p> <p>The data and the GTIDs backed up by mysqldump were inconsistent when the options --single-transaction and --set-gtid-purged=ON were both used. It was because in between the transaction started by mysqldump and the fetching of GTID_EXECUTED, GTIDs on the server could have increased already. With this fixed, a FLUSH TABLES WITH READ LOCK is performed before the fetching of GTID_EXECUTED to ensure its value is consistent with the snapshot taken by mysqldump.</p> <p>The MySQL fix also added a requirement when using --single-transaction and executing FLUSH TABLES WITH READ LOCK for the RELOAD privilege. (MySQL bug #109701, MySQL bug #105761)</p> <p>The Percona Server version of the <code>mysqldump</code> utility, in some modes, can be used with MySQL Server. This utility provides a temporary workaround for the \"additional RELOAD privilege\" limitation introduced by Oracle MySQL Server 8.0.32. </p> <p>For more information, see the Percona Performance Blog A Workaround for the \"RELOAD/FLUSH_TABLES privilege required\" Problem When Using Oracle mysqldump 8.0.32.</p> </li> <li> <p>In Percona Server for MySQL 8.0.29-21, the default ALTER TABLE algorithm was deliberately changed from <code>INSTANT</code> to <code>INPLACE</code> for safety reasons (find more details in Percona XtraBackup 8.0.29 and INSTANT ADD/DROP Columns blog post.) Since Oracle fixed the most critical bugs related to <code>ALGORITHM=INSTANT</code> in MySQL 8.0.32, Percona Server for MySQL 8.0.32-24 returns the original (upstream) behavior. Now, the default ALTER TABLE algorithm for supported DDL column operations is <code>INSTANT</code>.  </p> </li> </ul> <p>Improvements and bug fixes introduced by Oracle for MySQL 8.0.32 and included in Percona Server for MySQL are the following:</p> <ul> <li> <p>A replica can add a Generated Invisible Primary Keys(GIPK) to any InnoDB table. To achieve this behavior, the GENERATE value is added as a possible value for the CHANGE REPLICATION SOURCE TO statement\u2019s REQUIRE_TABLE_PRIMARY_KEY_CHECK option.</p> </li> <li> <p>The <code>REQUIRE_TABLE_PRIMARY_KEY_CHECK = GENERATE</code> option can be used on a per-channel basis.</p> </li> <li> <p>Setting <code>sql_generate_invisible_primary_key</code> on the source is ignored by a replica because this variable is not replicated. This behavior is inherited from the previous releases.</p> </li> <li> <p>An upgrade from 8.0.28 caused undetectable problems, such as server exit and corruption.</p> </li> <li> <p>A fix for after an upgrade, all columns added with ALGORITHM=INSTANT materialized and have version=0 for any new row inserted. Now, a column added with ALGORITHM=INSTANT fails if the maximum possible size of a row exceeds the row size limit, so that all new rows with materialized ALGORITHM=INSTANT columns are within row size limit. (Bug #34558510)</p> </li> <li> <p>After a drop, adding a specific column using the INSTANT algorithm could cause a data error and a server exit. (Bug #34122122)</p> </li> <li> <p>An online rebuild DDL no longer crashes after a column is added with ALGORITHM=INSTANT. Thank you Qingda Hu for reporting this bug. (Bug #33788578, Bug #106279)</p> </li> </ul> <p>Find the full list of bug fixes and changes in the MySQL 8.0.32 Release Notes.</p>"},{"location":"release-note/2023/8.0.32-24/#improvements","title":"Improvements","text":"<ul> <li> <p>PS-8450 : Replication: Transactions are stalled when the Certifier reconciles a transaction.</p> </li> <li> <p>PS-8626 : Inserting JSON data with <code>LOAD DATA INFILE</code> now shows the failed record number.</p> </li> </ul>"},{"location":"release-note/2023/8.0.32-24/#bug-fixes","title":"Bug fixes","text":"<ul> <li> <p>PS-8073 : Replication: Updating a table with a stored generated field in the primary key caused a replication crash.</p> </li> <li> <p>PS-8577 : When the auto_increment column is modified after the table creation, the <code>ALTER TABLE ... auto_increment=1</code> did not produce the expected result.</p> </li> <li> <p>PS-7538 : With <code>innodb_optimize_fulltext_only</code> enabled, running OPTIMIZE TABLE on a table with an FTS index caused a server exit.</p> </li> <li> <p>PS-8627 : Unexpected server exit because <code>NO_SUCH_TABLE</code> leads to <code>m_opened_table=0x0</code>.</p> </li> <li> <p>PS-8660 : Queries to the INFORMATION_SCHEMA or PERFORMANCE_SCHEMA would stall while connections are in the authentication phase.</p> </li> <li> <p>PS-8635 : Remove the Percona implementation of <code>build-id</code>.</p> </li> <li> <p>PS-7934 : Assertion <code>owned_gtids.is_owned_by(thd-&gt;owned_gtid, thd-&gt;thread_id())</code> failed.</p> </li> <li> <p>PS-8613 : Fixed a noticeable performance regression when authenticating.</p> </li> </ul>"},{"location":"release-note/2023/8.0.32-24/#useful-links","title":"Useful links","text":"<p>The Percona Server for MySQL GitHub location</p> <p>Contribute to the documentation</p> <p>For training, contact Percona Training - Start learning now</p>"},{"location":"release-note/2023/8.0.32-24/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"release-note/2023/8.0.33-25/","title":"Percona Server for MySQL 8.0.33-25 (2023-06-15)","text":"Release date June 15, 2023 Install instructions Install Percona Server for MySQL Upgrade instructions Percona Server for MySQL in-place upgrading guide: from 5.7 to 8.0 <p>Percona Server for MySQL 8.0.33-25 includes all the features and bug fixes available in the MySQL 8.0.33 Community Edition in addition to enterprise-grade features developed by Percona.</p> <p>Percona Server for MySQL is a freely available, fully compatible, enhanced, and open source drop-in replacement for any MySQL database. It provides superior and optimized performance, greater scalability, and availability, enhanced backups, increased visibility and instrumentation.</p> <p>Percona Server for MySQL is trusted by thousands of enterprises to provide better performance and concurrency for their most demanding workloads.</p>"},{"location":"release-note/2023/8.0.33-25/#release-highlights","title":"Release highlights","text":"<ul> <li> <p>This release adds the following MyRocks variables:</p> </li> <li> <p><code>rocksdb_bulk_load_use_sst_partitioner</code></p> </li> <li> <p><code>rocksdb_use_hyper_clock_cache</code></p> </li> <li> <p><code>rocksdb_converter_record_cached_length</code></p> </li> <li> <p><code>rocksdb_alter_table_comment_inplace</code></p> </li> <li> <p><code>rocksdb_charge_memory</code></p> </li> <li> <p><code>rocksdb_column_default_value_as_expression</code></p> </li> <li> <p><code>rocksdb_corrupt_data_action</code></p> </li> <li> <p><code>rocksdb_disable_instant_ddl</code></p> </li> <li> <p><code>rocksdb_enable_delete_range_for_drop_index</code></p> </li> <li> <p><code>rocksdb_partial_index_blind_delete</code></p> </li> <li> <p><code>rocksdb_protection_bytes_per_key</code></p> </li> <li> <p><code>rocksdb_use_write_buffer_manager</code></p> </li> <li> <p>This release adds a new MyRocks Information Schema Table <code>ROCKSDB_LIVE_FILES_METADATA</code>.</p> </li> <li> <p>This release removes <code>rocksdb_instant_ddl</code> variable. Use <code>rocksdb_disable_instant_ddl</code> instead. </p> </li> <li> <p>This merge fixes the following issues:</p> </li> <li> <p>PS-8477: The offline-mode persisted when doing <code>dba.rebootClusterFromCompleteOutage</code>. </p> </li> <li> <p>PS-8699: <code>ALTER INSTANCE RELOAD TLS</code> hung with many concurrent connection attempts. We have included the upstream fix and added our fix for this issue, which significantly reduces the chances that the issue will reoccur.</p> </li> </ul> <p>Improvements and bug fixes introduced by Oracle for MySQL 8.0.33 and included in Percona Server for MySQL are the following:</p> <ul> <li> <p>The <code>INSTALL COMPONENT</code> includes the <code>SET</code> clause. The <code>SET</code> clause sets the values of component system variables when installing one or several components. This reduces the inconvenience and limitations associated with assigning variable values in other ways.</p> </li> <li> <p>The mysqlbinlog <code>--start-position</code> accepts values up to <code>18446744073709551615</code>. If the <code>--read-from-remote-server</code> or <code>--read-from-remote-source</code> option is used, the maximum is <code>4294967295</code>. (Bug #77818, Bug #21498994)</p> </li> <li> <p>Using a generated column with <code>DEFAULT(col_name)</code> to specify the default value for a named column is not allowed and throws an error message. (Bug #34463652, Bug #34369580)</p> </li> <li> <p>Not all possible error states were reported during the binary log recovery process. (Bug #33658850)</p> </li> <li> <p>User-defined collations are deprecated. The usage of the following user-defined collations causes a warning that is written to the log:</p> </li> <li> <p>When <code>COLLATE</code> is followed by the name of a user-defined collation in an SQL statement.</p> </li> <li> <p>When the name of a user-defined collation is used as the value of <code>collation_server</code>, <code>collation_database</code>, or <code>collation_connection</code>.</p> </li> </ul> <p>The support for user-defined collations will be removed in a future releases of MySQL.</p> <p>Find the full list of bug fixes and changes in the MySQL 8.0.33 Release Notes.</p>"},{"location":"release-note/2023/8.0.33-25/#new-features","title":"New features","text":"<ul> <li>PS-8188: Adds the <code>clone_exclude_plugins_list</code> variable. By default, the list of installed plugins on the donor and recipient must match. The <code>clone_exclude_plugins_list</code> variable allows for specifying the list of plugin exceptions.</li> </ul>"},{"location":"release-note/2023/8.0.33-25/#bug-fixes","title":"Bug fixes","text":"<ul> <li> <p>PS-8647: <code>tmp_table_size=51200</code> caused server exit.</p> </li> <li> <p>PS-8683: Concurrent execution of <code>FLUSH STATUS</code>, <code>COM_CHANGE_USER</code>, and <code>SELECT FROM I_S.PROCESSLIST</code> led to deadlock. The deadlock affected connections executing the mentioned commands and other connections and made it impossible to shut down the server properly.</p> </li> <li> <p>PS-8713: <code>mysql_binlog_xxx()</code> symbols were not exported in <code>lybmysqlclient.so</code>.</p> </li> <li> <p>PS-8719: Audit log plugin stalled on flush.</p> </li> <li> <p>PS-8747: When Federated SE internal proxy-server connection timeout occured, <code>Got an error writing communication packets</code> was reported back to the user while the actual operation was successful.</p> </li> </ul>"},{"location":"release-note/2023/8.0.33-25/#useful-links","title":"Useful links","text":"<p>The Percona Server for MySQL GitHub location</p> <p>Download product binaries, packages, and tarballs at Percona Product Downloads</p> <p>Contribute to the documentation</p> <p>For training, contact Percona Training - Start learning now</p>"},{"location":"release-note/2023/8.0.33-25/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"security/dummy/","title":"Hi there \ud83d\udc4b","text":"<p>This is just a page to fill in the blanks in this prototype's interaction flows. Nothing to see here... \ud83d\ude05</p>"},{"location":"security/dummy/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"security/overview/","title":"Security Overview","text":"<p>Discover a range of robust security features and best practices to safeguard your Percona Server for MySQL deployment. Take control of your database security with our comprehensive security measures.</p> <p>Start with the topics that matter most to you, ensuring your Percona Server for MySQL remains protected from potential threats:</p> <ul> <li> <p>LDAP features: Explore how to leverage Lightweight Directory Access Protocol (LDAP) for enhanced authentication and authorization.</p> </li> <li> <p>Data masking: Learn data masking techniques to safeguard sensitive information and maintain data privacy.</p> </li> <li> <p>PAM authentication plugin: Understand the Pluggable Authentication Module (PAM) authentication plugin for advanced user authentication.</p> </li> <li> <p>SSL improvements: Enhance security with SSL improvements to ensure encrypted communication between clients and your MySQL server.</p> </li> <li> <p>Server variables: Understand server variables that play a crucial role in strengthening your security settings.</p> </li> <li> <p>FIDO authentication plugin: Implement Fast Identity Online (FIDO) authentication for an extra layer of security.</p> </li> <li> <p>Encryption functions: Discover powerful encryption functions to secure your data at various levels within MySQL.</p> </li> <li> <p>Data-at-rest-encryption: Learn about data-at-rest encryption and how to use the keyring component or keyring plugin.</p> </li> </ul> Ready to install? <p>Start your Percona Server for MySQL journey! Whether you're new or a seasoned user, our Quickstart Guides provide clear, concise, and easy-to-follow instructions to get you up and running.</p> <p>Quickstart Guides </p>"},{"location":"security/overview/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"storage-engine/dummy/","title":"Hi there \ud83d\udc4b","text":"<p>This is just a page to fill in the blanks in this prototype's interaction flows. Nothing to see here... \ud83d\ude05</p>"},{"location":"storage-engine/dummy/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"troubleshoot-and-qa/dummy/","title":"Hi there \ud83d\udc4b","text":"<p>This is just a page to fill in the blanks in this prototype's interaction flows. Nothing to see here... \ud83d\ude05</p>"},{"location":"troubleshoot-and-qa/dummy/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"troubleshoot-and-qa/overview/","title":"Troubleshoot and Q&amp;A","text":"<p>Encountering issues with Percona Server for MySQL? No need to worry! Our Troubleshoot and Q&amp;A pages are here to guide you through the most common challenges and provide solutions to help you get back on track.</p> <p>Whether you're an experienced user or just getting started, our Troubleshoot and Q&amp;A page is a valuable resource for resolving issues and gaining insights into Percona Server for MySQL.</p> <p>If you can't find the answers you need, reach out to our dedicated support team or join the vibrant Percona community to collaborate and share knowledge.</p>"},{"location":"troubleshoot-and-qa/overview/#troubleshooting","title":"Troubleshooting","text":"<ul> <li> <p>Installation and Configuration: Step-by-step guides to troubleshoot installation issues and fine-tune configurations.</p> </li> <li> <p>Performance Bottlenecks: Identify and resolve performance bottlenecks to optimize database efficiency.</p> </li> <li> <p>Data Integrity and Recovery: Strategies to safeguard your data and recover from unexpected failures.</p> </li> <li> <p>Networking and Connectivity: Troubleshoot network-related problems affecting database communication.</p> </li> <li> <p>Query Optimization: Learn how to optimize queries for faster and more efficient results.</p> </li> <li> <p>Replication and High Availability: Overcome challenges in replication and ensure high availability.</p> </li> <li> <p>Security and Access Control: Address security concerns and manage user access.</p> </li> </ul>"},{"location":"troubleshoot-and-qa/overview/#questions-answers","title":"Questions &amp; AnswersReady to install?","text":"<p>Our extensive Q&amp;A section covers commonly asked questions to address your immediate queries. Use the navigation menu to access the most common questions or head over to the Q&amp;A Index.</p> <p>Start your Percona Server for MySQL journey! Whether you're new or a seasoned user, our Quickstart Guides provide clear, concise, and easy-to-follow instructions to get you up and running.</p> <p>Quickstart Guides </p>"},{"location":"troubleshoot-and-qa/overview/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"wizard/","title":"Quickstart Guide","text":"<p>Percona Monitoring and Management (PMM) is an open-source platform that obliterates the complexity of database performance monitoring tasks. Installing PMM and monitoring a database requires 2 parts:</p> <ol> <li>Install PMM Server (instructions start further below).</li> <li>Make sure a PMM Client is set up and running with your database. Read more Note: Depending on where you have your database hosted, you may already have this step automated for you, so only minimal configuration will be required.</li> </ol> <pre><code>graph RL\nsubgraph s1[Step 1]\n    PS(PMM Server)\nend\nsubgraph s2[Step 2]\n    DB[(Database)] -- Data collection --&gt; PC(PMM Client)\nend\nPC -- Transmission --&gt; PS</code></pre>"},{"location":"wizard/#requirements","title":"Requirements","text":"Disk Memory Ports  1 GB of storage per monitored database node.  1 GB of storage per monitored database node for data retention set to one week.  Each database node should have at least 2 GB of memory for effective monitoring. Note: The increase in memory usage is not proportional to the number of nodes. Example: Data from 20 nodes should be easily handled with 16 GB.  By default, port 443 should be opened on the PMM Server.  The database port should be open for the PMM Agent."},{"location":"wizard/#select-where-you-want-to-run-pmm-server","title":"Select where you want to run PMM Server","text":"<p>First step is to decide on a host for PMM Server. You can choose from a wide array of options below.</p> <pre><code>graph RL\nsubgraph s1[Now: Step 1]\n    PS(PMM Server)\nend\nDB[(Database)] -- Data collection --&gt; PC(PMM Client)\nPC -- Transmission --&gt; PS</code></pre> Bare Metal / Virtual (recommended) Kubernetes Amazon Azure Google Cloud <p>To install PMM Server on Docker you can now opt to use our easy-install script, a fast and efficient method to get PMM Server running:</p> <p>Easy-install script </p> <p>Alternatively, you can also install with:</p> <ul> <li>Docker Image \u2014 This option is geared for those who prefer a hands-on approach, allowing you to configure PMM Server according to your preferences.</li> <li>Podman \u2014 This option presents a similar containerization experience, offering a seamless setup process while ensuring isolation of your PMM Server.</li> <li>Virtual Appliance \u2014 Hassle-free option that comes with all necessary components bundled together, making the setup a straightforward affair.</li> </ul> <p>Kubernetes links here...</p> <p>Amazon AWS links here...</p> <p>Azure links here...</p> <p>Google Cloud links here...</p>"},{"location":"wizard/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"wizard/install-pmm-server/docker-easy-install/","title":"Easy-install PMM Server","text":"<p>The following steps will guide you through the installation of PMM Server:</p> <ol> <li> <p>Download and run the PMM easy installation script from github. The install script only runs on Linux-compatible systems. To use it, run the command with <code>sudo</code> privileges or as root.</p> What's happening under the hood <ul> <li>Installs Docker if it is not installed on your system.</li> <li>Stops and renames any currently running PMM Server Docker container from <code>pmm-server</code> to <code>pmm-server-{timestamp}</code>. This old pmm-server container is not a recoverable backup.</li> <li>Pulls and runs the latest PMM Server Docker image.</li> <li> <p>To run PMM in the <code>Interactive</code> mode, execute the following command:</p> <pre><code>curl -fsSLO https://www.percona.com/get/pmm (or wget https://www.percona.com/get/pmm)\nchmod +x pmm\n./pmm --interactive\n</code></pre> </li> </ul> </li> <li> <p>Install PMM Server using <code>cURL</code> or <code>wget</code>:</p> cURLwget <pre><code>curl -fsSL https://www.percona.com/get/pmm | /bin/bash\n</code></pre> <pre><code>wget -qO - https://www.percona.com/get/pmm | /bin/bash    \n</code></pre> </li> <li> <p>Log in to PMM with the default login credentials that are provided after the installation is completed.</p> </li> </ol>"},{"location":"wizard/install-pmm-server/docker-easy-install/#next-step-set-up-pmm-client","title":"Next step: Set up PMM Client","text":"<p>Now that you have PMM Server set up we need to go to your databases and add PMM Client so that PMM Server can communicate with your databases. Learn how in the button below.</p> <p>Set up PMM Client </p> <p>If you want to try something else before anything, here are some other ideas for next steps:</p> <ul> <li>Backup PMM Server and its data</li> <li>Update PMM Server</li> <li>Restore PMM Server</li> <li>Remove PMM Server</li> <li>Use Environment Variables to set PMM Server parameters.</li> </ul>"},{"location":"wizard/install-pmm-server/docker-easy-install/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"wizard/install-pmm-server/docker/","title":"Install PMM Server on a Docker image","text":"<p>Note</p> <p>Before running PMM Server on our Docker image make sure you have Docker 1.12.6 or higher.</p> <p>You 3 options on how you can store data from your PMM Server. Select the method below that best fits your case.</p> Docker Volume (recommended)Data ContainerHost Directory <p>A Docker Volume is a designated directory on the host machine or on a remote server that preserves data, ensuring it remains intact even if the container is removed. Ideal for backing up, restoring, or handling data on remote hosts or cloud providers.</p> <p>Here's how to do it in the steps below.</p> <ol> <li> <p>Pull the image.</p> <pre><code>docker pull percona/pmm-server:2\n</code></pre> </li> <li> <p>Create a volume:</p> <pre><code>docker volume create pmm-data\n</code></pre> </li> <li> <p>Run the image:</p> <pre><code>docker run --detach --restart always \\\n--publish 443:443 \\\n-v pmm-data:/srv \\\n--name pmm-server \\\npercona/pmm-server:2\n</code></pre> </li> <li> <p>Change the password for the default <code>admin</code> user.</p> <ul> <li> <p>For PMM versions 2.27.0 and later:</p> <pre><code>docker exec -t pmm-server change-admin-password &lt;new_password&gt;\n</code></pre> </li> <li> <p>For PMM versions prior to 2.27.0:</p> <pre><code>docker exec -t pmm-server bash -c 'grafana-cli --homepath /usr/share/grafana --configOverrides cfg:default.paths.data=/srv/grafana admin reset-admin-password newpass'\n</code></pre> </li> </ul> </li> <li> <p>Visit <code>https://localhost:443</code> to see the PMM user interface in a web browser. (If you are accessing the docker host remotely, replace <code>localhost</code> with the IP or server name of the host.)</p> </li> </ol> <p>Instructions here...</p> <p>Instructions here...</p>"},{"location":"wizard/install-pmm-server/docker/#next-step-set-up-pmm-client","title":"Next step: Set up PMM Client","text":"<p>Now that you have PMM Server set up we need to go to your databases and add PMM Client so that PMM Server can communicate with your databases. Learn how in the button below.</p> <p>Set up PMM Client </p> <p>If you want to try something else before anything, here are some other ideas for next steps:</p> <ul> <li>Backup PMM Server and its data</li> <li>Update PMM Server</li> <li>Restore PMM Server</li> <li>Remove PMM Server</li> <li>Use Environment Variables to set PMM Server parameters.</li> </ul>"},{"location":"wizard/install-pmm-server/docker/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"wizard/set-up-pmm-client/","title":"Set up PMM Client","text":"<p>To make Percona Monitoring and Management (PMM) work properly a PMM Client needs to be set up in your database environment. This client acts as the messenger, relaying back the key performance insights from your database to the PMM Server.</p> <p>Depending on your setup, PMM Client may already be set up requiring only authentication or you may need to install it entirely. To understand what needs to be done in your system, select the database technology you're using first.</p>"},{"location":"wizard/set-up-pmm-client/#select-your-database-technology-and-host","title":"Select your database technology and host","text":"<p>Select the database technology you're using so we can direct you to the best set up of your PMM Client and start collecting data signals back to PMM Server.</p> <pre><code>graph RL\nPS(PMM Server)\nsubgraph s2[Now: Step 2]\n    DB[(Database)] -- Data collection --&gt; PC(PMM Client)\nend\nPC -- Transmission --&gt; PS</code></pre>  MySQL PostgreSQL MongoDB ProxySQL HAproxy LinuxOther technologies <p>For MySQL check the type of host that you have for your database and follow the instructions required to set up PMM Client.</p> Host Recommended set up Other advanced options Self-hosted / AWS EC2 Install PMM Client using Percona Repositories Using a PMM Client Docker imageDownload and install PMM Client files AWS RDS / AWS Aurora Configure AWS settings Azure Database for MySQL Configure Azure Settings Google Cloud SQL for MySQL Configure Google Cloud Settings Other hosts / No access to the node Remote monitoring <p>PostgreSQL links here...</p> <p>MongoDB links here...</p> <p>ProxySQL links here...</p> <p>HAproxy links here...</p> <p>Directly in Linux links here...</p> <p>Others' links here...</p>"},{"location":"wizard/set-up-pmm-client/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"wizard/set-up-pmm-client/install-pmm-client/percona-repositories/","title":"Install PMM Client using Percona Repositories","text":"aptyum <p>If you're on Debian, Ubuntu or any other Debian-based system, follow these commands to install PMM Client package.</p> <ol> <li> <p>First, configure the repositories.</p> <pre><code>wget https://repo.percona.com/apt/percona-release_latest.generic_all.deb\ndpkg -i percona-release_latest.generic_all.deb\n</code></pre> </li> <li> <p>Install the PMM Client package.</p> <p>Note: You have to install with root permissions.</p> <pre><code>apt update\napt install -y pmm2-client\n</code></pre> </li> <li> <p>Check if it's correctly installed.</p> <pre><code>pmm-admin --version\n</code></pre> </li> </ol> <p>If you're on Red Hat Enterprise Linux, CentOS or just using <code>yum</code>, follow these commands to install PMM Client package.</p> <ol> <li> <p>First, configure the repositories.</p> <pre><code>yum install -y https://repo.percona.com/yum/percona-release-latest.noarch.rpm\n</code></pre> </li> <li> <p>Install the PMM Client package.</p> <pre><code>yum install -y pmm2-client\n</code></pre> </li> <li> <p>Check if it's correctly installed.</p> <pre><code>pmm-admin --version\n</code></pre> </li> </ol>"},{"location":"wizard/set-up-pmm-client/install-pmm-client/percona-repositories/#register-pmm-client","title":"Register PMM Client","text":"<p>Register your client node with PMM Server.</p> <pre><code>pmm-admin config --server-insecure-tls --server-url=https://admin:admin@X.X.X.X:443\n</code></pre> <ul> <li><code>X.X.X.X</code> is the address of your PMM Server.</li> <li><code>443</code> is the default port number.</li> <li><code>admin</code>/<code>admin</code> is the default PMM username and password. This is the same account you use to log into the PMM user interface, which you had the option to change when first logging in.</li> </ul> <p>Important</p> <p>Clients must be registered with the PMM Server using a secure channel. If you use http as your server URL, PMM will try to connect via https on port 443. If a TLS connection can't be established you will get an error and you must use https along with the appropriate secure port.</p>"},{"location":"wizard/set-up-pmm-client/install-pmm-client/percona-repositories/#example","title":"Example","text":"<p>Register on PMM Server with IP address <code>192.168.33.14</code> using the default <code>admin/admin</code> username and password, a node with IP address <code>192.168.33.23</code>, type <code>generic</code>, and name <code>mynode</code>.</p> <pre><code>pmm-admin config --server-insecure-tls --server-url=https://admin:admin@192.168.33.14:443 192.168.33.23 generic mynode\n</code></pre>"},{"location":"wizard/set-up-pmm-client/install-pmm-client/percona-repositories/#next-step-connect-databases-to-pmm-server","title":"Next step: Connect Databases to PMM Server","text":"<p>Now that you have both PMM Server and one or more PMM Clients installed all you need to do now is to connect one or more Databases to PMM Server.</p> Type of database MySQL Connect Database PostgreSQL Connect Database MongoDB Connect Database ProxySQL Connect Database HAproxy Connect Database"},{"location":"wizard/set-up-pmm-client/install-pmm-client/percona-repositories/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/","title":"Connect a self-hosted or an AWS EC2 MySQL database to PMM","text":"<p>PMM Client collects metrics from MySQL, Percona Server for MySQL, Percona XtraDB Cluster, and MariaDB. Amazon RDS is also supported and explained in this section.</p>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#create-a-database-account-for-pmm","title":"Create a database account for PMM","text":"<p>It is good practice to use a non-superuser account to connect PMM Client to the monitored database instance. These examples create a database user with name <code>pmm</code>, password <code>pass</code>, and the necessary permissions.</p>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#on-mysql-80","title":"On MySQL 8.0","text":"<pre><code>CREATE USER 'pmm'@'127.0.0.1' IDENTIFIED BY 'pass' WITH MAX_USER_CONNECTIONS 10;\nGRANT SELECT, PROCESS, REPLICATION CLIENT, RELOAD, BACKUP_ADMIN ON *.* TO 'pmm'@'127.0.0.1';\n</code></pre>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#on-mysql-57","title":"On MySQL 5.7","text":"<pre><code>CREATE USER 'pmm'@'127.0.0.1' IDENTIFIED BY 'pass' WITH MAX_USER_CONNECTIONS 10;\nGRANT SELECT, PROCESS, REPLICATION CLIENT, RELOAD ON *.* TO 'pmm'@'127.0.0.1';\n</code></pre>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#choose-and-configure-a-source","title":"Choose and configure a source","text":"<p>Decide which source of metrics to use, and configure your database server for it. The choices are Slow query log and Performance Schema.</p> <p>While you can use both at the same time we recommend using only one--there is some overlap in the data reported, and each incurs a small performance penalty. The choice depends on the version and variant of your MySQL instance, and how much detail you want to see.</p> <p>Here are the benefits and drawbacks of Slow query log and Performance Schema metrics sources.</p>  Benefits  Drawbacks Slow query log 1. More detail.2. Lower resource impact (with query sampling feature in Percona Server for MySQL). 1. PMM Client must be on same host as database server or have access to slow query log.2. Log files grow and must be actively managed. Performance Schema 1. Faster parsing.2. Enabled by default on newer versions of MySQL. 1. Less detail."},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#data-source-recommendations","title":"Data source recommendations","text":"Database server Versions Recommended source MySQL 5.1-5.5 Slow query log MySQL 5.6+ Performance Schema MariaDB 10.0+ Performance Schema Percona Server for MySQL 5.7, 8.0 Slow query log Percona XtraDB Cluster 5.6, 5.7, 8.0 Slow query log"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#slow-query-log","title":"Slow query log","text":"<p>This section covers how to configure a MySQL-based database server to use the slow query log as a source of metrics.</p>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#applicable-versions","title":"Applicable versions","text":"Server Versions MySQL 5.1-5.5 MariaDB 10.1.2+ Percona Server for MySQL 5.7.10+, 8.0.12+ Percona XtraDB Cluster 5.6, 5.7, 8.0 <p>The slow query log records the details of queries that take more than a certain amount of time to complete. With the database server configured to write this information to a file rather than a table, PMM Client parses the file and sends aggregated data to PMM Server via the Query Analytics part of PMM Agent.</p>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#settings","title":"Settings","text":"Variable Value Description [<code>slow_query_log</code>][sysvar_slow_query_log] ON Enables the slow query log. [<code>log_output</code>][sysvar_log_output] <code>'FILE'</code> Ensures the log is sent to a file. (This is the default on MariaDB.) [<code>long_query_time</code>][sysvar_long_query_time] 0 The slow query threshold in seconds. In heavily-loaded applications, many quick queries can affect performance more than a few slow ones. Setting this value to <code>0</code> ensures all queries are captured. [<code>log_slow_admin_statements</code>][sysvar_log_slow_admin_statements] ON Includes the logging of slow administrative statements. [<code>log_slow_slave_statements</code>][sysvar_log_slow_slave_statements] ON Enables logging for queries that have taken more than <code>long_query_time</code> seconds to execute on the replica."},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#examples","title":"Examples","text":"<p>Configuration file:</p> <pre><code>slow_query_log=ON\nlog_output=FILE\nlong_query_time=0\nlog_slow_admin_statements=ON\nlog_slow_slave_statements=ON\n</code></pre> <p>Session:</p> <pre><code>SET GLOBAL slow_query_log = 1;\nSET GLOBAL log_output = 'FILE';\nSET GLOBAL long_query_time = 0;\nSET GLOBAL log_slow_admin_statements = 1;\nSET GLOBAL log_slow_slave_statements = 1;\n</code></pre>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#slow-query-log-extended","title":"Slow query log \u2014 Extended","text":"<p>Some MySQL-based database servers support extended slow query log variables.</p>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#applicable-versions_1","title":"Applicable versions","text":"Server Versions Percona Server for MySQL 5.7.10+, 8.0.12+ Percona XtraDB Cluster 5.6, 5.7, 8.0 MariaDB 10.0"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#settings_1","title":"Settings","text":"Variable Value Description [<code>log_slow_rate_limit</code>][log_slow_rate_limit] 100 Defines the rate of queries captured by the slow query log. A good rule of thumb is 100 queries logged per second. For example, if your Percona Server instance processes 10,000 queries per second, you should set <code>log_slow_rate_limit</code> to <code>100</code> and capture every 100th query for the slow query log. Depending on the amount of traffic, logging could become aggressive and resource consuming. This variable throttles the level of intensity of the data capture without compromising information. [<code>log_slow_rate_type</code>][log_slow_rate_type] 'query' Set so that it applies to queries, rather than sessions. [<code>slow_query_log_always_write_time</code>][slow_query_log_always_write_time] 1 Specifies which queries should ignore sampling. With query sampling this ensures that queries with longer execution time will always be captured by the slow query log, avoiding the possibility that infrequent slow queries might not get captured at all. [<code>log_slow_verbosity</code>][log_slow_verbosity] 'full' Ensures that all information about each captured query is stored in the slow query log. [<code>slow_query_log_use_global_control</code>][slow_query_log_use_global_control] 'all' Configure the slow query log during runtime and apply these settings to existing connections. (By default, slow query log settings apply only to new sessions.)"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#examples_1","title":"Examples","text":"<p>Configuration file (Percona Server for MySQL, Percona XtraDB Cluster):</p> <pre><code>```ini\nlog_slow_rate_limit=100\nlog_slow_rate_type='query'\nslow_query_log_always_write_time=1\nlog_slow_verbosity='full'\nslow_query_log_use_global_control='all'\n```\n</code></pre> <p>Configuration file (MariaDB):</p> <pre><code>```ini\nlog_slow_rate_limit=100\n```\n</code></pre> <p>Session (Percona Server for MySQL, Percona XtraDB Cluster):</p> <pre><code>```sql\nSET GLOBAL log_slow_rate_limit = 100;\nSET GLOBAL log_slow_rate_type = 'query';\nSET GLOBAL slow_query_log_always_write_time = 1;\nSET GLOBAL log_slow_verbosity = 'full';\nSET GLOBAL slow_query_log_use_global_control = 'all';\n```\n</code></pre>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#slow-query-log-rotation","title":"Slow query log rotation","text":"<p>Slow query log files can grow quickly and must be managed.</p> <p>When adding a service with the command line use the  <code>pmm-admin</code> option <code>--size-slow-logs</code> to set at what size the slow query log file is rotated. (The size is specified as a number with a suffix. See <code>pmm-admin add mysql</code>.)</p> <p>When the limit is reached, PMM Client will:</p> <ul> <li>remove the previous <code>.old</code> slow log file,</li> <li>rename the current file by adding the suffix <code>.old</code>,</li> <li>execute the MySQL command <code>FLUSH LOGS</code>.</li> </ul> <p>Only one <code>.old</code> file is kept. Older ones are deleted.</p> <p>You can manage log rotation yourself, for example, with [<code>logrotate</code>][LOGROTATE]. If you do, you can disable PMM Client's log rotation by providing a negative value to <code>--size-slow-logs</code> option when adding a service with <code>pmm-admin add</code>.</p>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#performance-schema","title":"Performance Schema","text":"<p>This section covers how to configure a MySQL-based database server to use Performance Schema as a source of metrics.</p>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#applicable-versions_2","title":"Applicable versions","text":"Server Versions Percona Server for MySQL 5.6, 5.7, 8.0 Percona XtraDB Cluster 5.6, 5.7, 8.0 MariaDB [10.3+][mariadb_perfschema_instr_table] <p>PMM's MySQL Performance Schema Details dashboard charts the various [<code>performance_schema</code>][performance-schema-startup-configuration] metrics.</p> <p>To use Performance Schema, set the variables below. </p> <p>Important</p> <p>Make sure to restart pmm-agent after making any changes to MySQL perfschema.</p> Variable Value Description [<code>performance_schema</code>][sysvar_performance_schema] <code>ON</code> Enables Performance Schema metrics. This is the default in MySQL 5.6.6 and higher. [<code>performance-schema-instrument</code>][perfschema-instrument] <code>'statement/%=ON'</code> Configures Performance Schema instruments. [<code>performance-schema-consumer-statements-digest</code>][perfschema-consumer-statements-digest] <code>ON</code> Configures the <code>statements-digest</code> consumer. [<code>innodb_monitor_enable</code>][sysvar_innodb_monitor_enable] all Enables InnoDB metrics counters."},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#examples_2","title":"Examples","text":"<p>Configuration file:</p> <pre><code>```ini\nperformance_schema=ON\nperformance-schema-instrument='statement/%=ON'\nperformance-schema-consumer-statements-digest=ON\ninnodb_monitor_enable=all\n```\n</code></pre> <p>Session:</p> <pre><code>(`performance_schema` cannot be set in a session and must be set at server start-up.)\n\n```sql\nUPDATE performance_schema.setup_consumers\nSET ENABLED = 'YES' WHERE NAME LIKE '%statements%';\nSET GLOBAL innodb_monitor_enable = all;\n```\n</code></pre>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#mariadb-1057-or-lower","title":"MariaDB 10.5.7 or lower","text":"<p>There is no Explain or Example data shown by default in Query Analytics when monitoring MariaDB instances version 10.5.7 or lower. A workaround is to set this variable.</p> Variable Value Description [<code>performance_schema.setup_instruments</code>][mariadb_perfschema_instr_table] <code>'statement/%'</code> List of instrumented object classes. <p>Session:</p> <pre><code>```sql\nUPDATE performance_schema.setup_instruments SET ENABLED = 'YES', TIMED = 'YES' WHERE NAME LIKE 'statement/%';\nUPDATE performance_schema.setup_consumers SET ENABLED = 'YES' WHERE NAME LIKE '%statements%';\n```\n</code></pre> <p>Transactions:</p> <pre><code>MariaDB doesn't implement queries history for transactions. All queries executed within a transaction won't have query examples since PMM relies on the `performance_schema.events_statements_history` to grab the query example but that table won't have any query executed as part of a transaction.\n\nThis behavior is because MariaDB doesn't implement these consumers:\n\n```\nevents_transactions_current\nevents_transactions_history\nevents_transactions_history_long\n```\n</code></pre>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#query-response-time","title":"Query response time","text":"<p>Query time distribution is a chart in the Details tab of Query Analytics showing the proportion of query time spent on various activities. It is enabled with the <code>query_response_time_stats</code> variable and associated plugins.</p>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#applicable-versions_3","title":"Applicable versions","text":"Server Versions Percona Server for MySQL 5.7 (not [Percona Server for MySQL 8.0][PS_FEATURES_REMOVED].) MariaDB 10.0.4 <p>Set this variable to see query time distribution charts.</p> Variable Value Description [<code>query_response_time_stats</code>][ps_query_response_time_stats] ON Report query response time distributions. (Requires plugin installation. See below.)"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#configuration-file","title":"Configuration file","text":"<pre><code>```ini\nquery_response_time_stats=ON\n```\n</code></pre> <p>You must also install the plugins.</p>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#session","title":"Session","text":"<ol> <li>Check that <code>/usr/lib/mysql/plugin/query_response_time.so</code> exists.</li> <li>Install the plugins and activate.</li> </ol> <p>For MariaDB 10.3:</p> <pre><code>    ```sql\n    INSTALL PLUGIN QUERY_RESPONSE_TIME_AUDIT SONAME 'query_response_time.so';\n    INSTALL PLUGIN QUERY_RESPONSE_TIME SONAME 'query_response_time.so';\n    SET GLOBAL query_response_time_stats = ON;\n    ```\n</code></pre> <p>For Percona Server for MySQL 5.7:</p> <pre><code>    ```sql\n    INSTALL PLUGIN QUERY_RESPONSE_TIME_AUDIT SONAME 'query_response_time.so';\n    INSTALL PLUGIN QUERY_RESPONSE_TIME SONAME 'query_response_time.so';\n    INSTALL PLUGIN QUERY_RESPONSE_TIME_READ SONAME 'query_response_time.so';\n    INSTALL PLUGIN QUERY_RESPONSE_TIME_WRITE SONAME 'query_response_time.so';\n    SET GLOBAL query_response_time_stats = ON;\n    ```\n</code></pre>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#tablestats","title":"Tablestats","text":"<p>Some table metrics are automatically disabled when the number of tables exceeds a default limit of 1000 tables. This prevents PMM Client from affecting the performance of your database server.</p> <p>The limit can be changed when adding a service on the command line with the two <code>pmm-admin</code> options:</p> <code>pmm-admin</code> option Description <code>--disable-tablestats</code> Disables tablestats collection when the default limit is reached. <code>--disable-tablestats-limit=N</code> Sets the number of tables (<code>N</code>) for which tablestats collection is disabled. 0 means no limit. A negative number means tablestats is completely disabled (for any number of tables)."},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#user-statistics","title":"User statistics","text":""},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#applicable-versions_4","title":"Applicable versions","text":"<p>User activity, individual table and index access details are shown on the [MySQL User Details][DASH_MYSQLUSERDETAILS] dashboard when the <code>userstat</code> variable is set.</p> Server Versions Percona Server for MySQL 5.6, 5.7, 8.0 Percona XtraDB Cluster 5.6, 5.7, 8.0 MariaDB 5.2.0+"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#examples_3","title":"Examples","text":"<p>Configuration file:</p> <pre><code>```ini\nuserstat=ON\n```\n</code></pre> <p>Session:</p> <pre><code>```sql\nSET GLOBAL userstat = ON;\n```\n</code></pre>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#add-service","title":"Add service","text":"<p>When you have configured your database server, you can add a MySQL service with the user interface or on the command line.</p> <p>When adding a service with the command line, you must use the <code>pmm-admin --query-source=SOURCE</code> option to match the source you've chosen and configured the database server for.</p> <p>With the PMM user interface, you select Use performance schema, or deselect it to use slow query log.</p>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#with-the-user-interface","title":"With the user interface","text":"<ol> <li> <p>Select  Configuration \u2192 {{icon.inventory}} Inventory \u2192 {{icon.addinstance}} Add Service.</p> </li> <li> <p>Select MySQL -- Add a remote instance.</p> </li> <li> <p>Enter or select values for the fields.</p> </li> <li> <p>Click Add service.</p> </li> </ol> <p></p> <p>If your MySQL instance is configured to use TLS, click on the Use TLS for database connections check box and fill in your TLS certificates and key.</p> <p></p>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#on-the-command-line","title":"On the command line","text":"<p>Add the database server as a service using one of these example commands. If successful, PMM Client will print <code>MySQL Service added</code> with the service's ID and name. Use the <code>--environment</code> and <code>-custom-labels</code> options to set tags for the service to help identify them.</p>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#examples_4","title":"Examples","text":""},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#tls-connection","title":"TLS connection","text":"<pre><code>pmm-admin add mysql --username=user --password=pass --tls --tls-skip-verify --tls-ca=pathtoca.pem --tls-cert=pathtocert.pem --tls-key=pathtocertkey.pem --server-url=http://admin:admin@127.0.0.1 --query-source=perfschema name localhost:3306\n</code></pre>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#slow-query-log_1","title":"Slow query log","text":"<p>Default query source (<code>slowlog</code>), service name (<code>{node name}-mysql</code>), and service address/port (<code>127.0.0.1:3306</code>), with database server account <code>pmm</code> and password <code>pass</code>.</p> <pre><code>pmm-admin add mysql --username=pmm --password=pass\n</code></pre> <p>Slow query log source and log size limit (1 gigabyte), service name (<code>MYSQL_NODE</code>) and service address/port (<code>191.168.1.123:3306</code>).</p> <pre><code>pmm-admin add mysql --query-source=slowlog --size-slow-logs=1GiB --username=pmm --password=pass MYSQL_NODE 192.168.1.123:3306\n</code></pre> <p>Slow query log source, disabled log management (use [<code>logrotate</code>][LOGROTATE] or some other log management tool), service name (<code>MYSQL_NODE</code>) and service address/port (<code>191.168.1.123:3306</code>).</p> <pre><code>pmm-admin add mysql --query-source=slowlog --size-slow-logs=-1GiB --username=pmm --password=pass MYSQL_NODE 192.168.1.123:3306\n</code></pre> <p>Default query source (<code>slowlog</code>), service name (<code>{node}-mysql</code>), connect via socket.</p> <pre><code>pmm-admin add mysql --username=pmm --password=pass --socket=/var/run/mysqld/mysqld.sock\n</code></pre>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#performance-schema_1","title":"Performance Schema","text":"<p>Performance schema query source, service name (<code>MYSQL_NODE</code>) and default service address/port (<code>127.0.0.1:3306</code>).</p> <pre><code>pmm-admin add mysql --query-source=perfschema --username=pmm --password=pass MYSQL_NODE\n</code></pre> <p>Performance schema query source, service name (<code>MYSQL_NODE</code>) and default service address/port (<code>127.0.0.1:3306</code>) specified with flags.</p> <pre><code>pmm-admin add mysql --query-source=perfschema --username=pmm --password=pass --service-name=MYSQL_NODE --host=127.0.0.1 --port=3306\n</code></pre>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#identifying-services","title":"Identifying services","text":"<p>Default query source (<code>slowlog</code>), environment labeled <code>test</code>, custom labels setting <code>source</code> to <code>slowlog</code>. (This example uses positional parameters for service name and service address.)</p> <pre><code>pmm-admin add mysql --environment=test --custom-labels='source=slowlog'  --username=root --password=password --query-source=slowlog MySQLSlowLog localhost:3306\n</code></pre>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#check-the-service","title":"Check the service","text":""},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#pmm-user-interface","title":"PMM user interface","text":"<ol> <li>Select  Configuration \u2192 {{icon.inventory}} Inventory.</li> <li>In the Services tab, verify the Service name, Addresses, and any other relevant information in the form.</li> <li>In the Options column, expand the Details section and check that the Agents are using the desired data source.</li> </ol>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#command-line","title":"Command line","text":"<p>Look for your service in the output of this command.</p> <pre><code>pmm-admin inventory list services --service-type=mysql\n</code></pre>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#check-data","title":"Check data","text":"<ol> <li>Open the MySQL Instance Summary dashboard.</li> <li>Set the Service Name to the newly-added service.</li> </ol>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#percona-server-for-mysql-mariadb","title":"Percona Server for MySQL, MariaDB","text":"<p>If query response time plugin was installed, check for data in the MySQL Query Response Time Details dashboard or select a query in PMM Query Analytics to see the Query time distribution bar.</p>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#percona-xtradb-cluster","title":"Percona XtraDB Cluster","text":"<p>Open the [PXC/Galera Cluster Summary dashboard][DASH_PXCGALERACLUSTER].</p>"},{"location":"wizard/set-up-pmm-client/mysql/self-hosted/#get-expert-help","title":"Get expert help","text":"<p>If you need assistance, visit the community forum for comprehensive and free database knowledge, or contact our Percona Database Experts for professional support and services.</p> <p> Community Forum  Get a Percona Expert</p>"}]}